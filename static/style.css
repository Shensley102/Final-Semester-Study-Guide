/* ===== Global ===== */
html { scroll-behavior: smooth; }
@media (prefers-reduced-motion: reduce) { html { scroll-behavior: auto; } }

:root{
  --bg:#f7f8fc;
  --card:#fff;
  --ink:#0b1320;
  --ink-soft:#4a5568;
  --primary:#2f61f3;      /* blue for Next state */
  --danger:#d33a2c;       /* red for errors / Reset outline */
  --success:#22c55e;      /* green for success */
  --ring:#cdd9ff;
  --border:#e7eaf3;

  --radius:16px;
  --shadow:0 12px 32px rgba(16,24,40,.05);
}

/* Layout */
body{
  margin:0;
  font:16px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
  color:var(--ink);
  background:var(--bg);
}
.container{ max-width:940px; margin:24px auto; padding:0 16px; }

/* Topbar */
.topbar{
  display:flex; align-items:center; justify-content:space-between;
  flex-wrap:wrap; gap:12px; margin-bottom:16px;
}
.topbar h1{ font-size:20px; margin:0; }
.counters{ display:flex; gap:14px; color:var(--ink-soft); font-size:14px; }

/* Reset button (red outline, only shows during quiz via JS) */
#resetAll{
  background:#fff;
  color:#b42318;
  border:2px solid var(--danger);
  padding:8px 12px;
  border-radius:10px;
  font-weight:600;
  cursor:pointer;
}
#resetAll:hover{ background:#fff5f5; }

/* Card */
.card{
  background:var(--card);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:16px;
  border:1px solid var(--border);
}

/* Forms & controls */
.form-row{
  display:grid; grid-template-columns:110px 1fr; gap:12px; align-items:center;
  margin-bottom:14px;
}
.lbl{ color:var(--ink-soft); }
.select{
  width:100%; max-width:520px; padding:10px 12px;
  border-radius:10px; border:1px solid var(--border); min-height:44px;
}

/* Segmented control (length) */
.seg{ display:flex; gap:10px; flex-wrap:wrap; }
.seg-btn{
  padding:10px 12px; min-width:64px; border-radius:999px;
  border:1px solid var(--border); background:#fff; cursor:pointer;
}
.seg-btn.active{ background:var(--primary); color:#fff; border-color:var(--primary); }

/* Buttons */
button{ appearance:none; -webkit-appearance:none; }
.primary{
  background:#22c55e; color:#fff; border:none;
  padding:12px 16px; border-radius:12px; cursor:pointer;
}
.secondary{
  background:#fff; color:var(--ink);
  border:1px solid var(--border); padding:12px 16px; border-radius:12px; cursor:pointer;
}
.link{ background:none; border:none; color:var(--primary); cursor:pointer; padding:0; }
.link-danger{ color:#b42318; background:#fff; border:1px solid #ffd1cd; }
.outline{ background:#fff; }
.block{ width:100%; }
.hidden{ display:none !important; }

/* Quiz */
.q{ margin-top:6px; margin-bottom:10px; }
.opts{ display:grid; gap:10px; margin-bottom:14px; }
.opt{
  display:flex; align-items:flex-start; gap:8px;
  padding:10px; border:1px solid var(--border); border-radius:12px; background:#fff;
}
.opt input{ margin-top:3px; }
.opt label{ display:block; }
.k{ display:inline-block; min-width:24px; font-weight:700; }
.ans{ color:var(--ink-soft); font-size:14px; }

.actions{ display:flex; gap:10px; flex-wrap:wrap; margin:10px 0 2px; }

/* Make the main action (Submit/Next) wider */
#submitBtn{ min-width:200px; padding:12px 24px; }

/* Blue variant when the button becomes "Next" */
.primary.btn-blue{
  background:var(--primary);
  color:#fff;
  border:none;
}
.primary.btn-blue:disabled{ opacity:0.6; cursor:not-allowed; }

/* Feedback (bigger + colored) */
.feedback{
  margin-top:10px;
  font-weight:800;
  font-size:18px;          /* bigger as requested */
}
.feedback.ok{ color:var(--success); }   /* “Correct!” -> green */
.feedback.bad{ color:var(--danger); }   /* “Incorrect” -> red */

.answer-line{ margin-top:6px; color:var(--ink-soft); }
.rationale{
  margin-top:10px; padding:12px; border-radius:12px; background:#f8fafc; border:1px solid var(--border);
}
.rationale.hidden{ display:none; }

/* Review / Summary */
.review{ margin-top:12px; }
.review-list{ display:grid; gap:10px; }
.rev-item{ border:1px solid var(--border); border-radius:12px; padding:12px; background:#fff; }
.rev-item.ok{ border-color:#b7e3c3; }
.rev-item.bad{ border-color:#ffd1cd; }
.rev-q{ margin-bottom:8px; font-weight:400; }
.rev-ans, .rev-user, .rev-rationale{ margin-top:6px; }

.summary-stats{
  display:grid; gap:8px; margin-bottom:14px; padding:10px;
  background:#f8fafc; border:1px solid var(--border); border-radius:12px;
}
.stat-row{ display:flex; align-items:baseline; gap:8px; flex-wrap:wrap; }
.stat-label{ color:var(--ink-soft); }
.stat-value{ font-weight:600; }
.stat-small{ color:var(--ink-soft); font-weight:400; margin-left:6px; }

/* Help / Overview panel */
.help{
  margin-top:14px;
  border:1px solid var(--border);
  border-radius:12px;
  background:#f8fafc;
}
.help > summary{
  padding:10px 12px;
  cursor:pointer;
  font-weight:700;
  list-style:none;
}
.help > summary::-webkit-details-marker{ display:none; }
.help .help-body{ padding:6px 12px 12px; color:var(--ink-soft); }
.help-list{ margin:0; padding-left:18px; display:grid; gap:6px; }
.kbd{
  font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
  font-size:.9em;
  background:#fff;
  border:1px solid var(--border);
  border-radius:6px;
  padding:1px 6px;
}

/* Focus ring */
button:focus-visible, .select:focus-visible, input:focus-visible{
  outline:3px solid var(--ring); outline-offset:2px;
}
